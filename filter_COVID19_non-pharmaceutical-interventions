#@title Specify State and Intervention Measure
import pandas as pd

url = 'https://raw.githubusercontent.com/amel-github/covid19-interventionmeasures/master/COVID19_non-pharmaceutical-interventions_version2_utf8.csv'
df = pd.read_csv(url, encoding='cp1252')

# Dropping all data that is not from the USA
df = df.loc[df['Country'] == 'United States of America']

# Filter Dataframe by State. 
filter_by_state = True #@param {type: "boolean"}
state = "New York" #@param ["Alaska", "Alabama", "Arkansas", "Arizona", "California", "Colorado", "Connecticut", "Delaware", "Florida", "Georgia", "Hawaii", "Iowa", "Idaho", "Illinois", "Indiana", "Kansas", "Kentucky", "Louisiana", "Massachusetts", "Maryland", "Maine", "Michigan", "Minnesota", "Missouri", "Mississippi", "Montana", "North Carolina", "North Dakota", "Nebraska", "New Hampshire", "New Jersey", "New Mexico", "Nevada", "New York", "Ohio", "Oklahoma", "Oregon", "Pennsylvania", "Puerto Rico", "Rhode Island", "South Carolina", "South Dakota", "Tennessee", "Texas", "Utah", "Virginia", "Virgin Islands", "Vermont", "Washington", "Wisconsin", "West Virginia", "Wyoming"]
if(filter_by_state == True):
    df = df.loc[df['State'] == state]

# Filter by safety measure.
filter_by_measure = True #@param {type: "boolean"}
measure = "Resource allocation" #@param {type:"string"} ["Case identification, contact tracing and related measures", "Environmental measures", "Healthcare and public health capacity", "Resource allocation", "Risk communication", "Social distancing", "Travel restriction","Returning to normal life"]
if(filter_by_measure == True):
    df = df.loc[df['Measure_L1'] == measure]

# Create a range of dates and filter for that range. 
filter_by_date_range = True #@param {type:"boolean"}
start_date = "2020-03-02" #@param {type:"date"}
end_date = "2020-10-31" #@param {type:"date"}
date_range = pd.date_range(start_date, end_date)

if (filter_by_date_range == True):
    df = df[~df.Date.isin(date_range)]    
df.to_csv('filtered_covid_measures.csv', index=None)

df
